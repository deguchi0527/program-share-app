<%= render "shared/header" %>

<div class="main">
  <%# 投稿一覧 %>
  <div class="tweet-contents">
    <h2 class="title">投稿一覧</h2>
    <ul class="tweet-lists">
      <% @tweets.each do |tweet| %>
        <% if tweet.private_id == 2 %>
          <li class="list">
            <%= link_to tweet_path(tweet.id) do %>
            <div class="tweet-img-content">
              <%= image_tag tweet.image, class: "tweet-img" %>
            </div>
            <div class="tweet-info">
              <h3 class="tweet-name">
                <%= tweet.title %>
              </h3>
              <div class="tweet-category">
                <span>カテゴリー: <%= tweet.category.name %></span>
                <div class="like-btn">
                  <%# ログインするといいねボタンが押せる %>
                  <% if user_signed_in? %>
                    <%# いいねの保存有無で条件分岐 %>
                    <% if current_user.already_liked?(tweet) %>
                      <%= button_to tweet_like_path(id: tweet.id, user_id: current_user.id, tweet_id: tweet), method: :delete, class:"heart-btn" do %>
                        <%= icon('fas', 'heart', class: "fa-lg heart-icon unlike") %>
                      <% end %>
                    <% else %>
                      <%= button_to tweet_likes_path(user_id: current_user.id, tweet_id: tweet), class:"heart-btn" do %>
                        <%= icon('fas', 'heart', class: "fa-lg heart-icon") %>
                      <% end %>
                    <% end %>
                    <%# /いいねの保存有無で条件分岐 %>
                    <span class='heart-count'><%= tweet.likes.count %></span>
                  <% else %>
                    <%= icon('fas', 'heart', class: "fa-lg heart-icon") %>
                    <span class='heart-count'><%= tweet.likes.count %></span>
                  <% end %>
                  <%# /ログインするといいねボタンが押せる %>
                </div>
              </div>
            </div>
            <% end %>
          </li>
        <% end %>
      <% end %>
    </ul>
  </div>
  <%# /投稿一覧 %>
</div>

<%# 投稿ページ遷移ボタン %>
<%= link_to(new_tweet_path, class: 'post-btn') do %>
  <span class='post-btn-text'>投稿する</span>
  <%= image_tag 'icon_camera.png' , size: '185x50' ,class: 'post-btn-icon' %>
<% end %>
<%# /投稿ページ遷移ボタン %>

<%= render "shared/footer"%>